!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(e.vega||(e.vega={})).embed=t()}}(function(){var t;return function t(e,n,r){function i(u,a){if(!n[u]){if(!e[u]){var c="function"==typeof require&&require;if(!a&&c)return c(u,!0);if(o)return o(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var l=n[u]={exports:{}};e[u][0].call(l.exports,function(t){var n=e[u][1][t];return i(n||t)},l,l.exports,t,e,n,r)}return n[u].exports}for(var o="function"==typeof require&&require,u=0;u<r.length;u++)i(r[u]);return i}({1:[function(e,n,r){!function(e,i){"object"==typeof r&&void 0!==n?i(r):"function"==typeof t&&t.amd?t(["exports"],i):i(e.d3=e.d3||{})}(this,function(t){"use strict";function e(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===K&&e.documentElement.namespaceURI===K?e.createElement(t):e.createElementNS(n,t)}}function n(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function r(){return new i}function i(){this._="@"+(++nt).toString(36)}function o(t,e,n){return t=u(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function u(e,n,r){return function(i){var o=t.event;t.event=i;try{e.call(this,this.__data__,n,r)}finally{t.event=o}}}function a(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}function c(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function s(t,e,n){var r=at.hasOwnProperty(t.type)?o:u;return function(i,o,u){var a,c=this.__on,s=r(e,o,u);if(c)for(var l=0,f=c.length;l<f;++l)if((a=c[l]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=s,a.capture=n),void(a.value=e);this.addEventListener(t.type,s,n),a={type:t.type,name:t.name,value:e,listener:s,capture:n},c?c.push(a):this.__on=[a]}}function l(e,n,r,i){var o=t.event;e.sourceEvent=t.event,t.event=e;try{return n.apply(r,i)}finally{t.event=o}}function f(){}function h(){return[]}function p(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function v(t,e,n,r,i,o){for(var u,a=0,c=e.length,s=o.length;a<s;++a)(u=e[a])?(u.__data__=o[a],r[a]=u):n[a]=new p(t,o[a]);for(;a<c;++a)(u=e[a])&&(i[a]=u)}function d(t,e,n,r,i,o,u){var a,c,s,l={},f=e.length,h=o.length,v=new Array(f);for(a=0;a<f;++a)(c=e[a])&&(v[a]=s=wt+u.call(c,c.__data__,a,e),s in l?i[a]=c:l[s]=c);for(a=0;a<h;++a)s=wt+u.call(t,o[a],a,o),(c=l[s])?(r[a]=c,c.__data__=o[a],l[s]=null):n[a]=new p(t,o[a]);for(a=0;a<f;++a)(c=e[a])&&l[v[a]]===c&&(i[a]=c)}function g(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function m(t){return function(){this.removeAttribute(t)}}function _(t){return function(){this.removeAttributeNS(t.space,t.local)}}function y(t,e){return function(){this.setAttribute(t,e)}}function w(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function x(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function b(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function A(t){return function(){this.style.removeProperty(t)}}function S(t,e,n){return function(){this.style.setProperty(t,e,n)}}function E(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function N(t){return function(){delete this[t]}}function O(t,e){return function(){this[t]=e}}function T(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function L(t){return t.trim().split(/^|\s+/)}function C(t){return t.classList||new M(t)}function M(t){this._node=t,this._names=L(t.getAttribute("class")||"")}function q(t,e){for(var n=C(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function D(t,e){for(var n=C(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function P(t){return function(){q(this,t)}}function V(t){return function(){D(this,t)}}function j(t,e){return function(){(e.apply(this,arguments)?q:D)(this,t)}}function z(){this.textContent=""}function U(t){return function(){this.textContent=t}}function $(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function B(){this.innerHTML=""}function k(t){return function(){this.innerHTML=t}}function R(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function I(){this.nextSibling&&this.parentNode.appendChild(this)}function H(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function J(){return null}function G(){var t=this.parentNode;t&&t.removeChild(this)}function X(t,e,n){var r=Dt(t),i=r.CustomEvent;i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Y(t,e){return function(){return X(this,t,e)}}function F(t,e){return function(){return X(this,t,e.apply(this,arguments))}}function W(t,e){this._groups=t,this._parents=e}function Z(){return new W([[document.documentElement]],Gt)}var K="http://www.w3.org/1999/xhtml",Q={svg:"http://www.w3.org/2000/svg",xhtml:K,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},tt=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),Q.hasOwnProperty(e)?{space:Q[e],local:t}:t},et=function(t){var r=tt(t);return(r.local?n:e)(r)},nt=0;i.prototype=r.prototype={constructor:i,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var rt=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var it=document.documentElement;if(!it.matches){var ot=it.webkitMatchesSelector||it.msMatchesSelector||it.mozMatchesSelector||it.oMatchesSelector;rt=function(t){return function(){return ot.call(this,t)}}}}var ut=rt,at={};if(t.event=null,"undefined"!=typeof document){"onmouseenter"in document.documentElement||(at={mouseenter:"mouseover",mouseleave:"mouseout"})}var ct=function(t,e,n){var r,i,o=a(t+""),u=o.length;{if(!(arguments.length<2)){for(l=e?s:c,null==n&&(n=!1),r=0;r<u;++r)this.each(l(o[r],e,n));return this}var l=this.node().__on;if(l)for(var f,h=0,p=l.length;h<p;++h)for(r=0,f=l[h];r<u;++r)if((i=o[r]).type===f.type&&i.name===f.name)return f.value}},st=function(){for(var e,n=t.event;e=n.sourceEvent;)n=e;return n},lt=function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]},ft=function(t){var e=st();return e.changedTouches&&(e=e.changedTouches[0]),lt(t,e)},ht=function(t){return null==t?f:function(){return this.querySelector(t)}},pt=function(t){"function"!=typeof t&&(t=ht(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,u,a=e[i],c=a.length,s=r[i]=new Array(c),l=0;l<c;++l)(o=a[l])&&(u=t.call(o,o.__data__,l,a))&&("__data__"in o&&(u.__data__=o.__data__),s[l]=u);return new W(r,this._parents)},vt=function(t){return null==t?h:function(){return this.querySelectorAll(t)}},dt=function(t){"function"!=typeof t&&(t=vt(t));for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var u,a=e[o],c=a.length,s=0;s<c;++s)(u=a[s])&&(r.push(t.call(u,u.__data__,s,a)),i.push(u));return new W(r,i)},gt=function(t){"function"!=typeof t&&(t=ut(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,u=e[i],a=u.length,c=r[i]=[],s=0;s<a;++s)(o=u[s])&&t.call(o,o.__data__,s,u)&&c.push(o);return new W(r,this._parents)},mt=function(t){return new Array(t.length)},_t=function(){return new W(this._enter||this._groups.map(mt),this._parents)};p.prototype={constructor:p,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var yt=function(t){return function(){return t}},wt="$",xt=function(t,e){if(!t)return p=new Array(this.size()),s=-1,this.each(function(t){p[++s]=t}),p;var n=e?d:v,r=this._parents,i=this._groups;"function"!=typeof t&&(t=yt(t));for(var o=i.length,u=new Array(o),a=new Array(o),c=new Array(o),s=0;s<o;++s){var l=r[s],f=i[s],h=f.length,p=t.call(l,l&&l.__data__,s,r),g=p.length,m=a[s]=new Array(g),_=u[s]=new Array(g);n(l,f,m,_,c[s]=new Array(h),p,e);for(var y,w,x=0,b=0;x<g;++x)if(y=m[x]){for(x>=b&&(b=x+1);!(w=_[b])&&++b<g;);y._next=w||null}}return u=new W(u,r),u._enter=a,u._exit=c,u},bt=function(){return new W(this._exit||this._groups.map(mt),this._parents)},At=function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),u=new Array(r),a=0;a<o;++a)for(var c,s=e[a],l=n[a],f=s.length,h=u[a]=new Array(f),p=0;p<f;++p)(c=s[p]||l[p])&&(h[p]=c);for(;a<r;++a)u[a]=e[a];return new W(u,this._parents)},St=function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,u=i[o];--o>=0;)(r=i[o])&&(u&&u!==r.nextSibling&&u.parentNode.insertBefore(r,u),u=r);return this},Et=function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=g);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var u,a=n[o],c=a.length,s=i[o]=new Array(c),l=0;l<c;++l)(u=a[l])&&(s[l]=u);s.sort(e)}return new W(i,this._parents).order()},Nt=function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},Ot=function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},Tt=function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var u=r[i];if(u)return u}return null},Lt=function(){var t=0;return this.each(function(){++t}),t},Ct=function(){return!this.node()},Mt=function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],u=0,a=o.length;u<a;++u)(i=o[u])&&t.call(i,i.__data__,u,o);return this},qt=function(t,e){var n=tt(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?_:m:"function"==typeof e?n.local?b:x:n.local?w:y)(n,e))},Dt=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView},Pt=function(t,e,n){var r;return arguments.length>1?this.each((null==e?A:"function"==typeof e?E:S)(t,e,null==n?"":n)):Dt(r=this.node()).getComputedStyle(r,null).getPropertyValue(t)},Vt=function(t,e){return arguments.length>1?this.each((null==e?N:"function"==typeof e?T:O)(t,e)):this.node()[t]};M.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var jt=function(t,e){var n=L(t+"");if(arguments.length<2){for(var r=C(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?j:e?P:V)(n,e))},zt=function(t){return arguments.length?this.each(null==t?z:("function"==typeof t?$:U)(t)):this.node().textContent},Ut=function(t){return arguments.length?this.each(null==t?B:("function"==typeof t?R:k)(t)):this.node().innerHTML},$t=function(){return this.each(I)},Bt=function(){return this.each(H)},kt=function(t){var e="function"==typeof t?t:et(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},Rt=function(t,e){var n="function"==typeof t?t:et(t),r=null==e?J:"function"==typeof e?e:ht(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},It=function(){return this.each(G)},Ht=function(t){return arguments.length?this.property("__data__",t):this.node().__data__},Jt=function(t,e){return this.each(("function"==typeof e?F:Y)(t,e))},Gt=[null];W.prototype=Z.prototype={constructor:W,select:pt,selectAll:dt,filter:gt,data:xt,enter:_t,exit:bt,merge:At,order:St,sort:Et,call:Nt,nodes:Ot,node:Tt,size:Lt,empty:Ct,each:Mt,attr:qt,style:Pt,property:Vt,classed:jt,text:zt,html:Ut,raise:$t,lower:Bt,append:kt,insert:Rt,remove:It,datum:Ht,on:ct,dispatch:Jt};var Xt=function(t){return"string"==typeof t?new W([[document.querySelector(t)]],[document.documentElement]):new W([[t]],Gt)},Yt=function(t){return"string"==typeof t?new W([document.querySelectorAll(t)],[document.documentElement]):new W([null==t?[]:t],Gt)},Ft=function(t,e,n){arguments.length<3&&(n=e,e=st().changedTouches);for(var r,i=0,o=e?e.length:0;i<o;++i)if((r=e[i]).identifier===n)return lt(t,r);return null},Wt=function(t,e){null==e&&(e=st().touches);for(var n=0,r=e?e.length:0,i=new Array(r);n<r;++n)i[n]=lt(t,e[n]);return i};t.creator=et,t.local=r,t.matcher=ut,t.mouse=ft,t.namespace=tt,t.namespaces=Q,t.select=Xt,t.selectAll=Yt,t.selection=Z,t.selector=ht,t.selectorAll=vt,t.touch=Ft,t.touches=Wt,t.window=Dt,t.customEvent=l,Object.defineProperty(t,"__esModule",{value:!0})})},{}],2:[function(t,e,n){"use strict";function r(t){var e=/\/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g,n=e.exec(t).slice(1,3);return{library:n[0],version:n[1]}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=r},{}],3:[function(t,e,n){(function(n){function r(t,e,n,r,o){a.loader().load(t).then(function(u){u?"config"===n?(e.opt.config=JSON.parse(u),i(r,e.spec,e.opt,o)):i(r,JSON.parse(u),e,o):console.error("No data found at "+t)}).catch(function(t){console.error(t)})}function i(t,e,n,h){var g,m,_,y=h||function(){},w=n&&n.renderer||"canvas",x=!n||void 0===n.actions||n.actions;n=n||{};try{if(a.isString(e))return r(e,n,"url",t,h);if(g=JSON.stringify(e,null,2),a.isString(n.config))return r(n.config,{spec:e,opt:n},"config",t,h);_=n.config;var b,A;e.$schema?(b=f(e.$schema),n.mode&&n.mode!==p[b.library]&&console.warn('The given visualization spec is written in "'+b.library+'", but mode argument is assigned as "'+m+'".'),m=p[b.library],A=b.version.replace(/^v/g,""),0!==l(A,v[m])&&console.warn('The input spec uses "'+m+'" '+A+', but current version of "'+m+'" is '+v[m]+".")):m=p[n.mode]||p.vega,m===p["vega-lite"]&&(_=c.util.extend(e.config||{},_||{})),e=d[m](e),m===p["vega-lite"]&&e.$schema&&(b=f(e.$schema),A=b.version.replace(/^v/g,""),0!==l(A,v.vega)&&console.warn('The compiled spec uses "vega" '+A+', but current version of "vega" is '+v.vega+"."));var S=u.select(t).classed("vega-embed",!0).html("")}catch(t){y(t)}var E=a.parse(e,_);try{var N=new a.View(E).logLevel(a.Warn).initialize(t).renderer(w).hover().run();if(!1!==x){var O=S.append("div").attr("class","vega-actions");if(!1!==x.export){var T="canvas"===w?"png":"svg";O.append("a").text("Export as "+T.toUpperCase()).attr("href","#").attr("target","_blank").attr("download",(e.name||"vega")+"."+T).on("mousedown",function(){var t=this;N.toImageURL(T).then(function(e){t.href=e}).catch(function(t){throw t}),u.event.preventDefault()})}!1!==x.source&&O.append("a").text("View Source").attr("href","#").on("click",function(){o(g),u.event.preventDefault()}),!1!==x.editor&&O.append("a").text("Open in Vega Editor").attr("href","#").on("click",function(){s(window,i.config.editor_url,{spec:g,mode:m}),u.event.preventDefault()})}y(null,{view:N,spec:e})}catch(t){y(t)}}function o(t){var e="<html><head>"+h.source_header+'</head><body><pre><code class="json">',n="</code></pre>"+h.source_footer+"</body></html>",r=window.open("");r.document.write(e+t+n),r.document.title="Vega JSON Source"}var u=t("d3-selection"),a="undefined"!=typeof window?window.vega:void 0!==n?n.vega:null,c="undefined"!=typeof window?window.vl:void 0!==n?n.vl:null,s=t("./post"),l=t("./version"),f=t("vega-schema-url-parser").default,h={editor_url:"http://vega.github.io/vega-editor/",source_header:"",source_footer:""},p={vega:"vega","vega-lite":"vega-lite"},v={vega:a.version,"vega-lite":c.version},d={vega:function(t){return t},"vega-lite":function(t){return c.compile(t).spec}};i.config=h,e.exports=i,e.exports.default=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./post":4,"./version":5,"d3-selection":1,"vega-schema-url-parser":2}],4:[function(t,e,n){e.exports=function(t,e,n){function r(e){e.source===o&&(a=0,t.removeEventListener("message",r,!1))}function i(){a<=0||(o.postMessage(n,"*"),setTimeout(i,u),a-=1)}var o=t.open(e),u=250,a=~~(1e4/u);t.addEventListener("message",r,!1),setTimeout(i,u)}},{}],5:[function(t,e,n){e.exports=function(t,e,n){function r(t){return(i?/^\d+[A-Za-z]*$/:/^\d+$/).test(t)}var i=n&&n.lexicographical||!0,o=n&&n.zeroExtend||!0,u=n&&n.depth||2,a=t.split(".").splice(0,u),c=e.split(".").splice(0,u);if(!a.every(r)||!c.every(r))return NaN;if(o){for(;a.length<c.length;)a.push("0");for(;c.length<a.length;)c.push("0")}i||(a=a.map(Number),c=c.map(Number));for(var s=0;s<a.length;++s){if(c.length==s)return 1;if(a[s]!=c[s])return a[s]>c[s]?1:-1}return a.length!=c.length?-1:0}},{}]},{},[3])(3)});
