/**
 * Combined by jsDelivr.
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
(function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.versor=n()})(this,function(){"use strict";function t(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}var n=Math.acos,r=Math.asin,e=Math.atan2,a=Math.cos,u=Math.max,i=Math.min,o=Math.PI,f=Math.sin,c=Math.sqrt,s=o/180,h=180/o,d=function(t){var n=t[0]/2*s,r=f(n),e=a(n),u=t[1]/2*s,i=f(u),o=a(u),c=t[2]/2*s,h=f(c),d=a(c);return[e*o*d+r*i*h,r*o*d-e*i*h,e*i*d+r*o*h,e*o*h-r*i*d]};return d.cartesian=function(t){var n=t[0]*s,r=t[1]*s,e=a(r);return[e*a(n),e*f(n),f(r)]},d.rotation=function(t){return[e(2*(t[0]*t[1]+t[2]*t[3]),1-2*(t[1]*t[1]+t[2]*t[2]))*h,r(u(-1,i(1,2*(t[0]*t[2]-t[3]*t[1]))))*h,e(2*(t[0]*t[3]+t[1]*t[2]),1-2*(t[2]*t[2]+t[3]*t[3]))*h]},d.delta=function(r,e,o){2==arguments.length&&(o=1);var s=function(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}(r,e),h=c(t(s,s));if(!h)return[1,0,0,0];var d=o*n(u(-1,i(1,t(r,e))))/2,M=f(d);return[a(d),s[2]/h*M,-s[1]/h*M,s[0]/h*M]},d.multiply=function(t,n){return[t[0]*n[0]-t[1]*n[1]-t[2]*n[2]-t[3]*n[3],t[0]*n[1]+t[1]*n[0]+t[2]*n[3]-t[3]*n[2],t[0]*n[2]-t[1]*n[3]+t[2]*n[0]+t[3]*n[1],t[0]*n[3]+t[1]*n[2]-t[2]*n[1]+t[3]*n[0]]},d});;

(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("d3-drag"),require("d3-selection"),require("d3-timer")):"function"==typeof define&&define.amd?define(["exports","d3-drag","d3-selection","d3-timer"],t):t(e.d3=e.d3||{},e.d3,e.d3,e.d3)})(this,function(e,t,r,i){"use strict";function o(e){var t,r,i,o,s,a,c=n({start:function(){t=versor.cartesian(projection.invert(c.position)),r=projection.rotate(),i=versor(r),e.start&&e.start()},move:function(){var o=projection.rotate(r).invert(c.position);if(!isNaN(o[0])){var n=versor.cartesian(o),s=versor.multiply(i,versor.delta(t,n)),a=versor.rotation(s);e.render(a),e.move&&e.move()}},end:function(){o=versor.cartesian(projection.invert(c.position.map(function(e,t){return e-c.velocity[t]/1e3}))),a=versor(projection.rotate()),s=versor.cartesian(projection.invert(c.position)),e.end&&e.end()},render:function(t){var r=versor.rotation(versor.multiply(a,versor.delta(o,s,1e3*t)));e.render&&e.render(r)},time:e.time});return c}function n(e){var t=e.time||5e3,o=-Math.log(1-1/1.0001),n={start:function(){var t=r.mouse(this);n.position=t,n.velocity=[0,0],n.timer&&(n.timer.stop(),n.timer=null,this.classList.remove("inertia")),this.classList.add("dragging"),e.start&&e.start.call(this,t)},move:function(){var t=r.mouse(this),i=performance.now(),o=i-n.time,s=1-Math.exp(-o/1e3);n.velocity=n.velocity.map(function(e,r){var o=t[r]-n.position[r],a=i-n.time;return 1e3*(1-s)*o/a+e*s}),n.time=i,n.position=t,e.move&&e.move.call(this,t)},end:function(){var r=n.velocity;if(r[0]*r[0]+r[1]*r[1]<100)return n.timer=null,this.classList.remove("inertia");this.classList.remove("dragging"),this.classList.add("inertia"),e.end&&e.end();var s=this;n.timer=i.timer(function(r){n.t=1.0001*(1-Math.exp(-o*r/t)),e.render&&e.render(n.t),n.t>1&&(n.timer.stop(),n.timer=null,s.classList.remove("inertia"),n.velocity=[0,0],n.t=1)})},position:[0,0],velocity:[0,0],timer:null,time:0};return n}e.geoInertiaDragHelper=o,e.geoInertiaDrag=function(e,r,i,n){i||"function"!=typeof projection||(i=projection),n||(n={});var s=o({projection:i,render:function(e){i.rotate(e),r&&r()},start:n.start,move:n.move,end:n.end,time:n.time});return e.call(t.drag().on("start",s.start).on("drag",s.move).on("end",s.end)),s},e.inertia=n,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=/sm/3fe64f28c5102628d9e811835e2307b3033ac62117e71994f989add87ee68524.map